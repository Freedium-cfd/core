<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title></title>
	
    <meta name="description" content="Your paywall breakthrough for medium.com!" />
    <meta name="keywords" content="medium, paywall, medium.com, paywall breakthrough" />
    <link rel="stylesheet" href="https://unpkg.com/tailwindcss@2.2.19/dist/tailwind.min.css"/>
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#00aba9">
<meta name="msapplication-TileColor" content="#00aba9">
<meta name="theme-color" content="#ffffff">
    <script src="https://cdn.jsdelivr.net/npm/lightense-images@1.0.17/dist/lightense.min.js"></script>
  </head>

<body class="bg-gray-100 font-sans leading-normal tracking-normal">
	<nav id="header" class="fixed w-full z-10 top-0">
	

		<div id="progress" class="h-1 z-20 top-0" style="background:linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0);"></div>

		<div class="w-full md:max-w-4xl mx-auto flex flex-wrap items-center justify-between mt-0 py-3">

			<div class="pl-4">
				<a class="text-green-500 text-base no-underline hover:no-underline font-extrabold text-xl" href="/" onclick="navigateToOrigin()">
					Freedium βeta
				</a>
			</div>

			<div class="block lg:hidden pr-4">
				<button id="nav-toggle" class="flex items-center px-3 py-2 border rounded text-gray-500 border-gray-600 hover:text-gray-900 hover:border-green-500 appearance-none focus:outline-none">
					<svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
						<title>Menu</title>
						<path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" />
					</svg>
				</button>
			</div>

			<div class="w-full flex-grow lg:flex lg:items-center lg:w-auto hidden lg:block mt-2 lg:mt-0 bg-gray-100 z-20" id="nav-content">
				<ul class="list-reset lg:flex justify-end flex-1 items-center">
					<!--
					<li class="mr-3">
						<a class="inline-block py-2 px-4 text-gray-900 font-bold no-underline" href="#">Active</a>
					</li>
					-->
					<li class="mr-3">
						<a class="inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4" href="https://medium.com/">Medium.com</a>
					</li>
					<!--
					<li class="mr-3">
						<a class="inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4" href="#">link</a>
					</li>
				-->
				</ul>
			</div>
		</div>
	</nav>



<div class="container w-full md:max-w-3xl mx-auto pt-20 break-words">
    <div class="w-full px-4 md:px-6 text-xl text-gray-800 leading-normal" style="font-family:Georgia,serif">
        <div class="font-sans">
            <p class="text-base md:text-sm text-green-500 font-bold pb-3">
                <a href="https://medium.com/@cameronjosephjones/building-a-kpi-dashboard-in-streamlit-using-python-c88ac63903f5" class="text-sm md:text-sm text-green-500 font-bold no-underline hover:underline ">&lt; Go to the original</a>
            </p>
            
                <img alt="Preview image"
                     style="max-height: 65vh;
                            width: auto;
                            margin: auto"
                     loading="eager"
                     role="presentation"
                     src="https://miro.medium.com/v2/resize:fit:700/1*8ASf5xmZQ3v6ckh_3tyWqQ.png">
            
            <h1 class="font-bold font-sans break-normal text-gray-900 pt-6 pb-2 text-3xl md:text-4xl">Building a KPI dashboard in Streamlit using Python</h1>
            <h2 class="font-medium font-sans break-normal text-gray-600 pt-1 pb-3 text-1xl md:text-1xl">A step-by-step guide to creating a data analyst portfolio project</h2>
        </div>
        <div class="bg-gray-100 border border-gray-300 m-2">
            <div class="flex items-center space-x-4 p-4">
                <div class="flex-shrink-0">
                    <a href="https://medium.com/@cameronjosephjones" target="_blank" title="Data Analyst @ HelloFresh: https://www.linkedin.com/in/cameronjones08/" class="block relative">
                        <img src="https://miro.medium.com/v2/resize:fill:88:88/1*nH63d3HiTnSVVgVcdoL8-g.jpeg"
                             alt="Cameron Jones"
                             class="rounded-full h-11 w-11 no-lightense">
                        <div class="absolute bottom-0 right-0 h-3 w-3 border-2 border-white bg-green-500 rounded-full"></div>
                    </a>
                </div>
                <div class="flex-grow">
                    <a href="https://medium.com/@cameronjosephjones"
                       target="_blank"
                       title="Data Analyst @ HelloFresh: https://www.linkedin.com/in/cameronjones08/"
                       class="block font-semibold text-gray-900">Cameron Jones</a>
                    <button class="text-sm text-white bg-green-500 px-3 py-1 rounded-lg mt-1">
                        <a href="https://medium.com/@cameronjosephjones"
                           target="_blank"
                           title="Data Analyst @ HelloFresh: https://www.linkedin.com/in/cameronjones08/"
                           class="block text-sm text-white">Follow</a>
                    </button>
                </div>
            </div>
            <div class="px-4 pb-2">
                <div class="flex flex-wrap items-center space-x-2 text-sm text-gray-500">
                    
                    <span class="text-gray-500">~4 min read</span>
                    <span class="md:inline">·</span>
                    <span class="text-gray-500">May 6, 2023 (Updated: May 6, 2023)</span>
                    <span class="md:inline">·</span>
                    <span class="text-yellow-500">Free: Yes</span>
                </div>
            </div>
        </div>
        <h2 class="font-bold font-sans break-normal text-gray-900 pt-5 text-l md:text-xl">A step-by-step guide to creating a Python data analyst portfolio project</h2><p class="mt-3">Follow me on Twitter and check out the source code on GitHub</p><p class="mt-7">Checkout the web app here: https://cameronjoejones-streamlit-sales-dashboard-app-3pmk71.streamlit.app/</p><p class="mt-7">In today’s data-driven world, the ability to quickly and effectively analyse data is crucial. Data analysts need powerful tools that can help them gain insights from data and share their findings with others. In this tutorial, I’ll walk you through the process of building an interactive sales dashboard using Streamlit, Pandas, and Plotly.</p><p class="mt-7">Streamlit is an open-source Python library that enables you to build interactive web applications quickly and easily. Pandas is a popular data manipulation library, and Plotly is a library for creating interactive visualisations. Together, these libraries make it simple to create an engaging and informative dashboard.</p><h2 class="font-bold font-sans break-normal text-gray-900 pt-5 text-l md:text-xl">Data for the project</h2><p class="mt-3">In this project, the data is from Kaggle — you can download the dataset from here: https://www.kaggle.com/datasets/kyanyoga/sample-sales-data or use your own dataset and rebuild the project yourself.</p><h2 class="font-bold font-sans break-normal text-gray-900 pt-5 text-l md:text-xl">Setting up your environment</h2><p class="mt-3">To get started, install the required packages:</p><pre style="overflow-x: auto;" class="p-4 mt-7"><span>pip install streamlit
pip install pandas
pip install plotly</span></pre><p class="mt-7">I’ll be using the following code to create our sales dashboard. In the sections below, I will explain each part of the code and how it contributes to the final product.</p><h1 class="font-bold font-sans break-normal text-gray-900 pt-5 text-1xl md:text-2xl">Code</h1><h2 class="font-bold font-sans break-normal text-gray-900 pt-5 text-l md:text-xl">Import libraries and set up the environment:</h2><pre style="overflow-x: auto;" class="p-4 mt-7"><span>from typing import List, Tuple

import pandas as pd
import plotly.express as px
import streamlit as st</span></pre><p class="mt-7">This section imports the necessary libraries: pandas, plotly.express, and streamlit. Additionally, it imports List and Tuple from the typing module for type hinting.</p><h2 class="font-bold font-sans break-normal text-gray-900 pt-5 text-l md:text-xl">Set up the page configuration:</h2><pre style="overflow-x: auto;" class="p-4 mt-7"><span>def set_page_config():
    st.set_page_config(
        page_title=&quot;Sales Dashboard&quot;,
        page_icon=&quot;:bar_chart:&quot;,
        layout=&quot;wide&quot;,
        initial_sidebar_state=&quot;expanded&quot;,
    )
    st.markdown(&quot;&lt;style&gt; footer {visibility: hidden;} &lt;/style&gt;&quot;, unsafe_allow_html=True)</span></pre><p class="mt-7">The set_page_config() function sets the page title, icon, layout, and initial sidebar state for the Streamlit app. It also hides the default footer using custom CSS.</p><h2 class="font-bold font-sans break-normal text-gray-900 pt-5 text-l md:text-xl">Load and cache data</h2><pre style="overflow-x: auto;" class="p-4 mt-7"><span>@st.cache_data
def load_data() -&gt; pd.DataFrame:
    data = pd.read_csv(&#39data/sales_data_sample.csv&#39, encoding=&#39latin1&#39)
    data[&#39ORDERDATE&#39] = pd.to_datetime(data[&#39ORDERDATE&#39])
    return data</span></pre><p class="mt-7">The load_data() function reads a CSV file containing sales data and converts the ORDERDATE column to a datetime format. The @st.cache_data decorator caches the result of this function, ensuring that the data is only loaded once.</p><h2 class="font-bold font-sans break-normal text-gray-900 pt-5 text-l md:text-xl">Data filtering and KPI calculation:</h2><pre style="overflow-x: auto;" class="p-4 mt-7"><span>def filter_data(data: pd.DataFrame, column: str, values: List[str]) -&gt; pd.DataFrame:
    return data[data[column].isin(values)] if values else data


@st.cache_data
def calculate_kpis(data: pd.DataFrame) -&gt; List[float]:
    total_sales = data[&#39SALES&#39].sum()
    sales_in_m = f&quot;{total_sales / 1000000:.2f}M&quot;
    total_orders = data[&#39ORDERNUMBER&#39].nunique()
    average_sales_per_order = f&quot;{total_sales / total_orders / 1000:.2f}K&quot;
    unique_customers = data[&#39CUSTOMERNAME&#39].nunique()
    return [sales_in_m, total_orders, average_sales_per_order, unique_customers]</span></pre><p class="mt-7">The filter_data() function filters a DataFrame based on the given column and list of values. The calculate_kpis() function calculates four key performance indicators (KPIs): total sales, total orders, average sales per order, and the number of unique customers.</p><h2 class="font-bold font-sans break-normal text-gray-900 pt-5 text-l md:text-xl">Display KPI metrics:</h2><pre style="overflow-x: auto;" class="p-4 mt-7"><span>def display_kpi_metrics(kpis: List[float], kpi_names: List[str]):
    st.header(&quot;KPI Metrics&quot;)
    for i, (col, (kpi_name, kpi_value)) in enumerate(zip(st.columns(4), zip(kpi_names, kpis))):
        col.metric(label=kpi_name, value=kpi_value)</span></pre><p class="mt-7">The display_kpi_metrics() function takes a list of KPIs and their corresponding names and displays them as metric cards in a row using Streamlit&#39s st.metric() function.</p><h2 class="font-bold font-sans break-normal text-gray-900 pt-5 text-l md:text-xl">Display the sidebar and filters:</h2><pre style="overflow-x: auto;" class="p-4 mt-7"><span>def display_sidebar(data: pd.DataFrame) -&gt; Tuple[List[str], List[str], List[str]]:
    st.sidebar.header(&quot;Filters&quot;)
    start_date = pd.Timestamp(st.sidebar.date_input(&quot;Start date&quot;, data[&#39ORDERDATE&#39].min().date()))
    end_date = pd.Timestamp(st.sidebar.date_input(&quot;End date&quot;, data[&#39ORDERDATE&#39].max().date()))

    product_lines = sorted(data[&#39PRODUCTLINE&#39].unique())
    selected_product_lines = st.sidebar.multiselect(&quot;Product lines&quot;, product_lines, product_lines)

    selected_countries = st.sidebar.multiselect(&quot;Select Countries&quot;, data[&#39COUNTRY&#39].unique())

    selected_statuses = st.sidebar.multiselect(&quot;Select Order Statuses&quot;, data[&#39STATUS&#39].unique())

    return selected_product_lines, selected_countries, selected_statuses</span></pre><p class="mt-7">The display_sidebar() function creates a sidebar with various filters (date range, product lines, countries, order statuses).</p><h2 class="font-bold font-sans break-normal text-gray-900 pt-5 text-l md:text-xl">Display charts and data tables:</h2><pre style="overflow-x: auto;" class="p-4 mt-7"><span>def display_charts(data: pd.DataFrame):
    combine_product_lines = st.checkbox(&quot;Combine Product Lines&quot;, value=True)

    if combine_product_lines:
        fig = px.area(data, x=&#39ORDERDATE&#39, y=&#39SALES&#39,
                      title=&quot;Sales by Product Line Over Time&quot;, width=900, height=500)
    else:
        fig = px.area(data, x=&#39ORDERDATE&#39, y=&#39SALES&#39, color=&#39PRODUCTLINE&#39,
                      title=&quot;Sales by Product Line Over Time&quot;, width=900, height=500)

    fig.update_layout(margin=dict(l=20, r=20, t=50, b=20))
    fig.update_xaxes(rangemode=&#39tozero&#39, showgrid=False)
    fig.update_yaxes(rangemode=&#39tozero&#39, showgrid=True)
    st.plotly_chart(fig, use_container_width=True)

    col1, col2, col3 = st.columns(3)

    with col1:
        st.subheader(&quot;Top 10 Customers&quot;)
        top_customers = data.groupby(&#39CUSTOMERNAME&#39)[&#39SALES&#39].sum().reset_index().sort_values(&#39SALES&#39,
                                                                                              ascending=False).head(10)
        st.write(top_customers)

    with col2:
        st.subheader(&quot;Top 10 Products by Sales&quot;)
        top_products = data.groupby([&#39PRODUCTCODE&#39, &#39PRODUCTLINE&#39])[&#39SALES&#39].sum().reset_index().sort_values(&#39SALES&#39,
                                                                                                             ascending=False).head(
            10)
        st.write(top_products)

    with col3:
        st.subheader(&quot;Total Sales by Product Line&quot;)
        total_sales_by_product_line = data.groupby(&#39PRODUCTLINE&#39)[&#39SALES&#39].sum().reset_index()
        st.write(total_sales_by_product_line)</span></pre><p class="mt-7">The display_charts() function creates and displays interactive charts and data tables using Plotly and Streamlit. It includes an area chart for sales by product line over time, a top 10 customers table, a top 10 products by sales table, and a total sales by product line table.</p><h2 class="font-bold font-sans break-normal text-gray-900 pt-5 text-l md:text-xl">The main function:</h2><pre style="overflow-x: auto;" class="p-4 mt-7"><span>def main():
    set_page_config()

    data = load_data()

    st.title(&quot;📊 Sales Dashboard&quot;)

    selected_product_lines, selected_countries, selected_statuses = display_sidebar(data)

    filtered_data = data.copy()
    filtered_data = filter_data(filtered_data, &#39PRODUCTLINE&#39, selected_product_lines)
    filtered_data = filter_data(filtered_data, &#39COUNTRY&#39, selected_countries)
    filtered_data = filter_data(filtered_data, &#39STATUS&#39, selected_statuses)

    kpis = calculate_kpis(filtered_data)
    kpi_names = [&quot;Total Sales&quot;, &quot;Total Orders&quot;, &quot;Average Sales per Order&quot;, &quot;Unique Customers&quot;]
    display_kpi_metrics(kpis, kpi_names)

    display_charts(filtered_data)


if __name__ == &#39__main__&#39:
    main()</span></pre><p class="mt-7">The main() function ties everything together. It sets up the page configuration, loads the data, and displays the title, sidebar, KPI metrics, and charts. The data is filtered based on the selected filters in the sidebar, and the KPIs are recalculated and displayed accordingly. The dashboard is executed by calling the main() function when the script is run.</p><h1 class="font-bold font-sans break-normal text-gray-900 pt-5 text-1xl md:text-2xl">Testing the app/ running locally</h1><p class="mt-3">To run the app, save the code in a file named app.py, and then run the following command:</p><pre style="overflow-x: auto;" class="p-4 mt-7"><span>streamlit run app.py</span></pre><p class="mt-7">Your app will open in a web browser and allow you to see the dashboard in a local environement.</p><h1 class="font-bold font-sans break-normal text-gray-900 pt-5 text-1xl md:text-2xl">Deploying the App to the web</h1><p class="mt-3">Simply follow Streamlit’s simple documentation on how to deploy your app to the web https://docs.streamlit.io/streamlit-community-cloud/get-started/deploy-an-app</p><p class="mt-7">Happy coding!</p>
        <div class="flex flex-wrap gap-2 mt-5">
            <a title="Python" target="_blank" href="https://medium.com/tag/python"><span class="text-green-500 bg-green-100 px-2 py-1 rounded-full text-xs">#python</span></a><a title="Streamlit" target="_blank" href="https://medium.com/tag/streamlit"><span class="text-green-500 bg-green-100 px-2 py-1 rounded-full text-xs">#streamlit</span></a><a title="Portfolio" target="_blank" href="https://medium.com/tag/portfolio"><span class="text-green-500 bg-green-100 px-2 py-1 rounded-full text-xs">#portfolio</span></a><a title="Data Science" target="_blank" href="https://medium.com/tag/data-science"><span class="text-green-500 bg-green-100 px-2 py-1 rounded-full text-xs">#data-science</span></a><a title="Data Analysis" target="_blank" href="https://medium.com/tag/data-analysis"><span class="text-green-500 bg-green-100 px-2 py-1 rounded-full text-xs">#data-analysis</span></a>
        </div>
        <div class="container w-full md:max-w-3xl mx-auto pt-12"></div>
    </div>
    <style>
code {
    /*font-size: 75%;*/
    background-color: #e3e2e2;
}
pre {
    font-size: 75%;
    background-color: #e3e2e2;
}
    </style>
<script>
  function navigateToOrigin() {
    window.location.href = window.location.origin;
  }
</script>

<script>
const h = document.documentElement, b = document.body;
const st = 'scrollTop';
const sh = 'scrollHeight';
const progress = document.getElementById('progress');
const header = document.getElementById('header');
const navcontent = document.getElementById('nav-content');

document.addEventListener('scroll', function () {
  /* Refresh scroll % width */
  const scroll = (h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight) * 100;
  progress.style.setProperty('--scroll', scroll + '%');

  /* Apply classes for slide in bar */
  const shouldAddClass = window.scrollY > 10;

  header.classList.toggle('bg-white', shouldAddClass);
  header.classList.toggle('shadow', shouldAddClass);
  navcontent.classList.toggle('bg-gray-100', !shouldAddClass);
  navcontent.classList.toggle('bg-white', shouldAddClass);
});

		document.getElementById('nav-toggle').onclick = function() {
			document.getElementById("nav-content").classList.toggle("hidden");
		}

  window.addEventListener('load', function () {
       Lightense('img:not(.no-lightense)');
  }, false);
</script>
</body>

</html>